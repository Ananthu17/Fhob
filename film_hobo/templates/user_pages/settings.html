{% extends 'base.html' %}
{% load token %}


        {% block extracss %}
        {% endblock %}
        {% block content %}
        <div class="container">
            <div class="row">
                <h3>GENERAL ACCOUNT SETTINGS</h3>
                <div class="col-md-4">
                    <form method="post" action="{% url 'hobo_user:settings' %}">
                        {% csrf_token %}
                    <p>First Name:
                        <input type ="text" disabled id="first_name" name="first_name" value="{{user.first_name}}" />
                        <input type = "button" value = "Edit" id="edit_first_name">
                        {% if message.first_name %}
                            {% for err in message.first_name %}
                                 <p>{{ err}}</p>
                            {% endfor %}
                        {% endif %}
                    </p>
                    <p>Middle Name:
                        <input type ="text" disabled id="middle_name" name="middle_name" value="{{user.middle_name}}" />
                        <input type = "button" value = "Edit" id="edit_middle_name">
                    </p>
                    <p>Last Name:
                        <input type ="text" disabled id="last_name" name="last_name" value="{{user.last_name}}" />
                        <input type = "button" value = "Edit" id="edit_last_name">
                        {% if message.last_name %}
                            {% for err in message.last_name %}
                                 <p>{{ err}}</p>
                            {% endfor %}
                        {% endif %}
                    </p>
                    <p>Email:
                        <input type ="email" disabled id="email" name="email" value="{{user.email}}" />
                        <input type = "button" value = "Edit" id="edit_email">
                        {% if message.email %}
                            {% for err in message.email %}
                                 <p>{{ err}}</p>
                            {% endfor %}
                        {% endif %}
                    </p>
                    <p>Password:
                        <input type ="text" disabled id="password" name="password" value="* * * * *" />
                        <input type = "button" value = "Edit" id="edit_password">
                    </p>
                    <p><a href="">Disable My Account</a></p>
                    <input type = "button" value = "Cancel" id="cancel">
                    <input type = "submit" value = "Save" id="save_general">
                    </form>
                </div>

            <div class="col-md-4">
                <h4>Change Password</h4>
                <form method="post" action="{% url 'hobo_user:settings-change-password' %}">
                    {% csrf_token %}
                    <p>{{change_password_form.old_password.label}}
                     {{change_password_form.old_password}}
                     {% if change_password_errors.old_password %}
                     {% for err in change_password_errors.old_password %}
                         <p>{{ err}}</p>
                     {% endfor %}
                 {% endif %}
                    </p>
                    <p>
                    {{change_password_form.new_password1.label}}
                    {{change_password_form.new_password1}}
                    {% if change_password_errors.new_password1 %}
                        {% for err in change_password_errors.new_password1 %}
                            <p>{{ err}}</p>
                        {% endfor %}
                    {% endif %}
                    </p>
                    <P>
                     {{change_password_form.new_password2.label}}
                     {{change_password_form.new_password2}}
                     {% if change_password_errors.new_password2 %}
                        {% for err in change_password_errors.new_password2 %}
                            <p>{{ err}}</p>
                        {% endfor %}
                     {% endif %}
                    </p>
                     <input type = "submit" value = "Save" id="save_password">
                     {% if change_password_messages %}
                            <p>{{ change_password_messages}}</p>
                     {% endif %}
                </form>
            </div>
            <div class="col-md-4">
                <h4>Disable Account</h4>
                <form method="post" action="{% url 'hobo_user:settings-disable-account' %}">
                    {% csrf_token %}
                        <p>{{disable_account_form.reason}}</p>
                        {% if disable_account_errors.errors %}
                                <p>{{disable_account_errors.errors}}</p>
                        {% endif %}
                        <input type = "button" value = "Cancel" id="cancel">
                        <input type = "submit" value = "Disable" id="disable_account">
                </form>
            </div>
        </div>
            <div class="row">
                <h3>PRIVACY SETTINGS</h3>
                <div class="col-md-12">
                    <form method="post" action="{% url 'hobo_user:privacy-settings' %}">
                        {% csrf_token %}
                            <b>Who can see my Profile</b></br>
                                <input type="radio" id="all_members" name="profile_visibility" value="all_members"
                                {% if user_settings.profile_visibility == 'all_members' %}checked{% endif %}>
                                <label for="all_members">All Members</label><br>

                                <input type="radio" id="members_with_rating" name="profile_visibility" value="members_with_rating"
                                {% if user_settings.profile_visibility != 'no_one' and user_settings.profile_visibility != 'pros_and_companies_only' and user_settings.profile_visibility != 'all_members' %}checked
                                {% endif %}>
                                <label for="members_with_rating">Members with rating
                                        <input type="radio" id="star1" name="rate" value="1"
                                        {% if user_settings.profile_visibility == 'members_with_rating_1_star' %}checked{% endif %}/>
                                        <label for="star1" title="text">1 star</label>
                                        <input type="radio" id="star2" name="rate" value="2"
                                        {% if user_settings.profile_visibility == 'members_with_rating_2_star' %}checked{% endif %}/>
                                        <label for="star2" title="text">2 stars</label>
                                        <input type="radio" id="star3" name="rate" value="3"
                                        {% if user_settings.profile_visibility == 'members_with_rating_3_star' %}checked{% endif %}/>
                                        <label for="star3" title="text">3 stars</label>
                                        <input type="radio" id="star4" name="rate" value="4"
                                        {% if user_settings.profile_visibility == 'members_with_rating_4_star' %}checked{% endif %}/>
                                        <label for="star4" title="text">4 stars</label>
                                        <input type="radio" id="star5" name="rate" value="5"
                                        {% if user_settings.profile_visibility == 'members_with_rating_5_star' %}checked{% endif %}/>
                                        <label for="star5" title="text">5 stars</label>
                                </label><br>

                                <input type="radio" id="pros_and_companies_only" name="profile_visibility" value="pros_and_companies_only"
                                {% if user_settings.profile_visibility == 'pros_and_companies_only' %}checked{% endif %}/>
                                <label for="pros_and_companies_only">Pros and Companies Only</label><br>

                                <input type="radio" id="no_one" name="profile_visibility" value="no_one"
                                {% if user_settings.profile_visibility == 'no_one' %}checked{% endif %}/>
                                <label for="no_one">No One</label><br>

                                {% if privacy_setting_errors.profile_visibility %}
                                    {% for err in privacy_setting_errors.profile_visibility %}
                                        <p>{{ err}}</p>
                                    {% endfor %}
                                {% endif %}
                                <b>Who can contact me</b></br>
                                <input type="radio" id="members_with_rating" name="who_can_contact_me" value="members_with_rating"
                                {% if user_settings.who_can_contact_me != 'no_one' and user_settings.who_can_contact_me != 'pros_and_companies_only'%}checked{% endif %}>
                                <label for="members_with_rating">Members with rating
                                        <input type="radio" id="star1" name="rate" value="1"
                                        {% if user_settings.who_can_contact_me == 'members_with_rating_1_star' %}checked{% endif %}/>
                                        <label for="star1" title="text">1 star</label>
                                        <input type="radio" id="star2" name="rate" value="2"
                                        {% if user_settings.who_can_contact_me == 'members_with_rating_2_star' %}checked{% endif %}/>
                                        <label for="star2" title="text">2 stars</label>
                                        <input type="radio" id="star3" name="rate" value="3"
                                        {% if user_settings.who_can_contact_me == 'members_with_rating_3_star' %}checked{% endif %}/>
                                        <label for="star3" title="text">3 stars</label>
                                        <input type="radio" id="star4" name="rate" value="4"
                                        {% if user_settings.who_can_contact_me == 'members_with_rating_4_star' %}checked{% endif %}/>
                                        <label for="star4" title="text">4 stars</label>
                                        <input type="radio" id="star5" name="rate" value="5"
                                        {% if user_settings.who_can_contact_me == 'members_with_rating_5_star' %}checked{% endif %}/>
                                        <label for="star5" title="text">5 stars</label>
                                </label><br>

                                <input type="radio" id="pros_and_companies_only" name="who_can_contact_me" value="pros_and_companies_only"
                                {% if user_settings.who_can_contact_me == 'pros_and_companies_only' %}checked{% endif %}>
                                <label for="pros_and_companies_only">Pros and Companies Only</label><br>

                                <input type="radio" id="no_one" name="who_can_contact_me" value="no_one"
                                {% if user_settings.who_can_contact_me == 'no_one' %}checked{% endif %}>
                                <label for="no_one">No One</label><br>

                                {% if privacy_setting_errors.who_can_contact_me %}
                                    {% for err in privacy_setting_errors.who_can_contact_me %}
                                        <p>{{ err}}</p>
                                    {% endfor %}
                                {% endif %}
                                <input type = "button" value = "Cancel" id="cancel">
                                <input type = "submit" value = "Save" id="save_privacy_settings">

                    </form>
                </div>
            </div>
        </div>


        {% endblock %}
        {% block extrajs %}
        <script>
            $('body').on('click' , '#edit_first_name', function(){
                 $('#first_name').removeAttr("disabled");
            });
            $('body').on('click' , '#edit_middle_name', function(){
                 $('#middle_name').removeAttr("disabled");
            });
            $('body').on('click' , '#edit_last_name', function(){
                 $('#last_name').removeAttr("disabled");
            });
            $('body').on('click' , '#edit_email', function(){
                 $('#email').removeAttr("disabled");
            });
            $('body').on('click' , '#edit_password', function(){

            });
    </script>
        {% endblock %}
