{% extends 'base.html' %}
{% load static %}
{% load friend_request_tag %}
{% block extracss %}
{% endblock %}

{% block content %}
<div class="wrapper flex-grow-1">
        <div class="container-fluid member-setup-sec">
            <div class="row">
                <div class="col-lg-2 col-md-12 col-sm-12 col-xs-12 mt-3">
                    <div class="left-mode-sec p-2">View profile in:
                        <button class="btn btn-mem-mode btn-block mt-2">Edit Mode</button>
                        <button class="btn btn-mem-mode btn-block mt-2">Public Mode</button>
                    </div>
                    <div class="left-mode-sec mt-3 p-2">
                        <ul class="list-unstyled p-2 mb-0">
                            <li><a href="#" class="membr-setup-m">My Interests (5)</a></li>
                            <li class="mt-4"><a href="#" class="membr-setup-m">My Projects (2)</a></li>
                        </ul>
                    </div>
                    <div class="left-mode-sec mt-3 p-2 blank-left-mode">
                    </div>
                </div>
                <div class="col-lg-2 col-md-12 col-sm-12 col-xs-12 mt-3 pl-1 pr-1">
                    <div class="left-mode-sec mem-img-p">
                        <div class="row">
                            <div class="col-12 mem-set-img">
                                {% if profile.user.get_profile_photo  %}
                                <img src="{{ profile.user.get_profile_photo}}" class="img-fluid mem-set-top-img" />
                                {% else %}
                                <img src="{% static 'images/default_profile_pic.png' %}" class="img-fluid mem-set-top-img" />
                                {% endif %}
                        </div>
                        </div>
                        <div class="row mt-1">
                          {% for photo in photos %}
                            <div class="col-4 mem-set-img">
                                <img src="{{photo.image.url}}" class="img-fluid  mem-set-img-s" />
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="mt-3 mem-set-add-sec">
                        <!-- <div class=" mb-2 text-center"> <a href="#" class="mem-setup-blu-f">Add/Remove Pictures</a>
                        </div>
                        <div class="row">
                        {% for photo in all_photos %}
                            <div class="col-3 mem-set-img">
                                <img src="{{photo.image.url}}" class="img-fluid mem-set-img-add">
                            </div>
                            {% endfor %}
                        </div>
                        <div class="mem-setup-blck-f mt-2 mb-3">#1 is a Profile Picture. You can
                            flip pictures any time</div> -->
                    </div>
                    <!-- <div class="mem-set-network-sec mt-3">
                        <div class="mem-setup-blu-f mb-1 float-left">Network/Friends</div>
                        <div class="float-right"><a href="#" class="mem-setup-blck-f">Edit</a></div>
                        <hr class="mem-setup-network-hr">
                        {% for item in friends %}
                        {% if forloop.first or forloop.counter == 5 %}
                        <div class="row pl-1 pr-1 {% if forloop.counter == 5 %} mt-3 {% endif %}">
                        {% endif %}
                            <div class="col-3 mem-set-net-img-sec2">
                                <a href="{{item.get_profile_url}}">
                                {% if item.get_profile_photo %}
                                <img src="{{item.get_profile_photo}}"
                                title="{{item.get_full_name}}" class="img-fluid mem-set-img-add">
                                {% else %}
                                <img src="{% static 'images/default_profile_pic.png' %}"
                                title="{{obj.user.get_full_name}}"
                                class="img-fluid mem-set-img-add">
                                {% endif %}
                               </a>
                                <div class="mem-set-img-add-nam">{{item.get_full_name|truncatechars:"5"}}</div>
                            </div>
                        {% if forloop.last or forloop.counter == 4 %}
                        </div>
                        {% endif %}
                        {% endfor%}
                    </div> -->

                    <!-- <div class="mem-set-network-sec mt-3 mb-4">
                        <div class="mb-1 float-left"><a href="#" class="mem-setup-orng-f">({{tracking_list_count}})Tracking</a></div>
                        <div class="float-right"><a href="#" class="mem-setup-blu-f">({{trackers_list_count}})Trackers</a></div>
                        <hr class="mem-setup-network-hr">
                        <div class="mem-set-track-txt mb-1"><span class="underline">People</span> ({{tracking_list.count}})</div>
                        <div class="row pl-3 pr-3">
                                {% for obj in tracking_list %}
                                <div class="col-2 mem-set-img">
                                    <a href="{{obj.user.get_profile_url}}">
                                    {% if obj.user.get_profile_photo %}
                                    <img src="{{ obj.user.get_profile_photo}}" title="{{obj.user.get_full_name}}"
                                    class="img-fluid mem-set-img-track-sec2">
                                    {% else %}
                                    <img src="{% static 'images/default_profile_pic.png' %}" title="{{obj.user.get_full_name}}"
                                    class="img-fluid mem-set-img-track-sec2">
                                    {% endif %}
                                    </a>
                                    <div class="mem-set-img-track-nam">{{obj.user.get_full_name|truncatechars:"5" }}</div>
                                </div>
                                {% endfor %}
                        </div>
                        <div class="mem-set-track-txt mt-1 mb-1"><span class="underline">Projects</span> (3)</div>
                        <div class="row">
                            <div class="col-4 ">
                                <div class="track-blu-f">Project<span class="track-orng-f">#224</span></div>
                                <div class="track-blu-f">Title:<span class="track-orng-f">Dynamo</span></div>
                            </div>
                            <div class="col-4 mem-set-track-padding">
                                <div class="track-blu-f">Project<span class="track-orng-f">#56</span></div>
                                <div class="track-blu-f">Title:<span class="track-orng-f">Jack</span></div>
                            </div>
                            <div class="col-4 mem-set-track-padding pl-0">
                                <div class="track-blu-f">Project<span class="track-orng-f">#457</span></div>
                                <div class="track-blu-f">Title:<span class="track-orng-f">Hammer</span></div>
                            </div>
                        </div>
                        <div class="mem-set-track-txt mt-1 mb-1"><span class="underline">Teams</span> (2)</div>
                        <div class="row">
                            <div class="col-6">
                                <div class="track-blu-f">Project<span class="track-orng-f">#224</span></div>
                                <div class="track-blu-f">Team:<span class="track-orng-f">#3</span></div>
                                <div class="track-blu-f">Location:<span class="track-orng-f">Dallas</span></div>
                            </div>
                            <div class="col-6 mem-set-track-padding">
                                <div class="track-blu-f">Project<span class="track-orng-f">#178</span></div>
                                <div class="track-blu-f">Team:<span class="track-orng-f">#1</span></div>
                                <div class="track-blu-f">Location:<span class="track-orng-f">New York</span></div>
                            </div>
                        </div>
                    </div> -->
                </div>
                <div class="col-lg-8 col-md-12 col-sm-12 col-xs-12 mt-3">
                    <div class="container p-0">
                        <div>
                            <h2 class="h5 mem-setup-blu-f text-center"> Add/Remove Pictures </h2>
                        </div><br>
                            <div class="row add-align">
                                {% for photo in all_photos %}
                                <div class="s-12 m-3 l-3 ">
                                    <img src="{{ photo.image.url }}" class=" mem-set-img-addremove" >
                                    <input type="hidden" value="{{photo.id}}" name="image_id" />
                                    <nav aria-label="Page navigation example">
                                        <div class="radio-toolbar add-or-btn">
                                            <ul class="pagination justify-content-center">
                                            <li class="ml-2"><a id="1_{{photo.id}}" class="{% if photo.position != 1 %}pos{%else%}img-btn{% endif %}"><label >1</label></a></li>
                                            <li class="ml-2"><a id="2_{{photo.id}}" class="{% if photo.position != 2 %}pos{%else%}img-btn{% endif %}"><label >2</label></a></li>
                                            <li class="ml-2"><a id="3_{{photo.id}}" class="{% if photo.position != 3 %}pos{%else%}img-btn{% endif %}"><label >3</label></a></li>
                                            <li class="ml-2"><a id="4_{{photo.id}}" class="{% if photo.position != 4 %}pos{%else%}img-btn{% endif %}"><label >4</label></a></li>
                                            </ul>
                                            </div>
                                      </nav>
                                </div>
                                {% endfor %}
                            </div>
                            <div class="container">
                                <form method="post" enctype="multipart/form-data"
                                action="{% url 'hobo_user:upload-image' %}">
                                        {% csrf_token %}
                                <div class="row justify-content-center">
                                    <div class="col-md-2 col-sm p-0 text-center">
                                        <label class="Choose-Location">Choose Location</label>
                                    </div>
                                    <div class="col-md-2 col-sm">
                                        <div class="radio-toolbar">
                                            <ul class="pagination ">
                                                <li class="ml-2">
                                                        <input type="radio" class="mem-page-link" id="radio1"
                                                        value="1" name="position">
                                                        <label for="radio1">1</label>
                                                </li>
                                                <li class="ml-2">
                                                        <input type="radio" class="mem-page-link" id="radio2"
                                                        value="2" name="position">
                                                    <label for="radio2">2</label>
                                                </li>
                                                <li class="ml-2">
                                                        <input type="radio" class="mem-page-link" id="radio3"
                                                        value="3" name="position">
                                                    <label for="radio3">3</label>
                                                </li>
                                                <li class="ml-2">
                                                        <input type="radio" class="mem-page-link" id="radio4"
                                                        value="4" name="position">
                                                    <label for="radio4">4</label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-md-3 col-sm ">
                                        <label for="file" class="custom-file-upload ">
                                                <span class="image-filename">Upload Photo(JPEG,PNG)</span></label>
                                        <input type="file" id="file" name="image" class="inp-file">
                                    </div>
                                    <div class="col-md-3 col-sm">
                                        <input type="submit"
                                        class="btn btn-light  btn-sm font-clr font-weight-bold"
                                        value="Save">
                                    </div>
                                </div>
                        </form>
                            </div>
                        </form>
                    </div>
                    <hr class="mem-set-acc-hr-1">
                    <!-- ======Network/friends====== -->
                    <div class="container mt-4 ml-2 p-0">
                        <div class="card">
                            <div class="dropdown text-center">
                                <span class="mr-2 px-2">
                                    <lable class="net-or-friend float-left ml-2">Network / Friends </lable>
                                    <span class="top-symb">
                                        <select class="" name="friends_groups"
                                            id="filter-friends"
                                            placeholder="Groups"
                                            required>
                                            <option value="all">All</option>
                                            {% for obj in groups %}
                                            <option value="{{obj.id}}">{{obj.title}}</option>
                                            {% endfor %}
                                        </select>
                                    </span>
                                    <span><a  class="add-new-group cursor-pointer"
                                        data-toggle="modal"
                                        data-target="#add-group">Groups</a>
                                        <!-- The Modal -->
                                        <div class="modal fade" id="add-group">
                                            <div class="modal-dialog">
                                                <div class="modal-content">

                                                    <!-- Modal Header -->
                                                    <div class="modal-header">
                                                        <h5 class="modal-title mem-setup-blu-f">Groups</h5>
                                                        <button type="button" class="close" data-dismiss="modal"
                                                        id="close-friend-group-modal">&times;</button>
                                                    </div>

                                                    <!-- Modal body -->
                                                    <div class="modal-body">
                                                        <div class="row friend-group">
                                                            {% for group in groups %}
                                                            <div class="col-3" style="text-align:left;">
                                                                <p>{{group}}</p>
                                                            </div>
                                                            <div class="col-9" style="text-align:left;">
                                                                <a id="{{group.id}}" class="remove-friend-group cursor-pointer">Remove</a>
                                                            </div>
                                                            {% endfor %}
                                                        </div>
                                                        <div class="row" style="text-align:left">
                                                            <div class="col-3">New Group: </div>
                                                            <div class="col-4">
                                                                <input class="inp-line"
                                                                name="group_name"
                                                                id="group_name"
                                                                autocomplete="off"/>
                                                            </div>
                                                            <div class="col-4">
                                                                <button type="button" class="btn mem-setup-blu-f save_btn"
                                                                id="save-group">Save</button>
                                                            </div>
                                                        </div>

                                                    </div>

                                                    <!-- Modal footer -->
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-outline-danger btn-sm"
                                                            data-dismiss="modal" id="close-friend-group-modal">Close</button>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <!-- end of modal -->
                                    </span>
                                    <button type="button"
                                        class="btn  bg-transparent  dropdown-toggle float-right font-clr font-weight-bold"
                                        data-toggle="dropdown">
                                        ({{friend_request_count}})Friend Requests
                                    </button>

                                    <div class="dropdown-menu border border-dark item-flow">
                                        <div class="dropdown-item font-weight-bold"> {{friend_request_count}} Friend requests </div>
                                        {% for request in friend_request%}
                                        <div class="dropdown-item">
                                                <img src="{{ request.requested_by.get_profile_photo }}" class="rounded-circle-img">
                                                <span class="pro-font sub-drop">{{request.requested_by.get_membership_display}}</span>
                                                <span class="sub-name">{{request.requested_by.get_full_name}}</span>
                                                <span class="sub-btn float-right">
                                                        <a class="btn btn-primary btn-sm drop-btn-1 rounded-0 accept_friend_request cursor-pointer"
                                                        id="{{request.requested_by.id}}">Confirm</a>
                                                        <a class="btn btn-light btn-sm drop-btn ml-2 delete_friend_request cursor-pointer"
                                                        id="{{request.requested_by.id}}">Delete</a>
                                                </span>
                                        </div>
                                        {% endfor %}

                                    </div>
                            </div>
                            <div class="container mb-2">
                                <div class="card border border-dark ">
                                    <div class="ml-2 mt-2 mb-2 friend-list">
                                        {% for friend in all_friends %}
                                        {% if forloop.first or forloop.counter0|divisibleby:4 %}
                                        <div class="row ">
                                        {% endif %}
                                            <div class="s-12 m-3 l-3 {% if forloop.first or forloop.counter0|divisibleby:4 %} mem-width {% endif %}">
                                                <div class="row">
                                                    <div class="col-md-6 col-sm-6">
                                                        {% if friend.get_profile_photo %}
                                                        <img src="{{friend.get_profile_photo}}" class=" mem-set-img-networkorfriends">
                                                        {% else %}
                                                        <img src="{% static 'images/default_profile_pic.png' %}" class=" mem-set-img-networkorfriends">
                                                        {% endif %}
                                                    </div>
                                                    <div class="col-md-6 col-sm-12">
                                                        <span class="symbols">
                                                            <i class="fa fa-user-times cursor-pointer"
                                                            data-toggle="modal" data-target="#unfriend-{{friend.id}}"
                                                            title="Unfriend" aria-hidden="true"></i>
                                                            <i class="fa fa-users mt-5 cursor-pointer"  data-toggle="modal"
                                                            data-target="#add-to-group-{{friend.id}}" title="Group" aria-hidden="true"></i>
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="row mt-2">
                                                    <div class="col-12">
                                                    <lable>{{friend.get_full_name|truncatechars:"18"}} </lable>
                                                    </div>
                                                </div>
                                                <div class=" row star-alg mt-2">
                                                    <div class="col-12">
                                                    <span class="fa fa-star checked "></span>
                                                    <span class="fa fa-star checked "></span>
                                                    <span class="fa fa-star checked"></span>
                                                    <span class="fa fa-star-o"></span>
                                                    <span class="fa fa-star-o"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        {% if forloop.last or forloop.counter|divisibleby:4 %}
                                        </div>
                                        {% endif %}
                                         <!-- The Modal -->
                                         <div class="modal fade" id="add-to-group-{{friend.id}}">
                                            <div class="modal-dialog">
                                                <div class="modal-content">

                                                    <!-- Modal Header -->
                                                    <div class="modal-header">
                                                        <h5 class="modal-title mem-setup-blu-f">Add to Group</h5>
                                                        <button type="button" class="close close-add-togroup-modal" data-dismiss="modal">&times;</button>
                                                    </div>

                                                    <!-- Modal body -->
                                                    <div class="modal-body">
                                                        <div class="row">
                                                            {% get_groups friend as friend_groups %}
                                                            {% if groups %}
                                                            {% for group in groups %}
                                                            <div class="col-12">
                                                                <input type="checkbox" name="group_{{friend.id}}"
                                                                class="group" value="{{group.id}}"
                                                                {% if group in friend_groups %} checked {% endif %}>
                                                                <label for="{{group}}"> {{group}}</label><br>
                                                            </div>
                                                            {% endfor %}
                                                            {% else %}
                                                            <div class="col-12">
                                                            <p>No groups available.</p>
                                                            </div>
                                                            {% endif %}
                                                        </div>
                                                        <!-- <a class="btn mem-setup-blu-f  save_btn" id="add-friend-to-groups" data-dismiss="modal">Save</a> -->
                                                    </div>

                                                    <!-- Modal footer -->
                                                    <div class="modal-footer">
                                                        {% if groups %}
                                                        <button type="button" class="btn btn-outline-danger btn-sm add-friend-to-groups"
                                                            data-dismiss="modal" id="{{friend.id}}">Save</button>
                                                        <button type="button" class="btn btn-outline-danger btn-sm close-add-togroup-modal"
                                                            data-dismiss="modal" >Close</button>
                                                        {% else %}
                                                        <div class="col-12">
                                                            <button type="button" class="btn btn-outline-danger btn-sm"
                                                            data-dismiss="modal" >Close</button>
                                                        </div>
                                                        {% endif %}
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <!-- end of modal -->
                                         <!-- The Modal -->
                                         <div class="modal fade" id="unfriend-{{friend.id}}">
                                            <div class="modal-dialog">
                                                <div class="modal-content">

                                                    <!-- Modal Header -->
                                                    <div class="modal-header">
                                                        <h5 class="modal-title mem-setup-blu-f">Unfriend {{friend.get_full_name}}!!!</h5>
                                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                    </div>

                                                    <!-- Modal body -->
                                                    <div class="modal-body">
                                                        <div class="row">
                                                            <div class="col-12">
                                                            <p>Do you want to unfriend {{friend.get_full_name}}?</p>
                                                            <input type ="hidden" name="unfriend-user-name"
                                                            id="unfriend-user-name" value ="{{friend.get_full_name}}" />
                                                            </div>
                                                        </div>
                                                        <!-- <a class="btn mem-setup-blu-f  save_btn" id="add-friend-to-groups" data-dismiss="modal">Save</a> -->
                                                    </div>

                                                    <!-- Modal footer -->
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-outline-danger btn-sm unfriend-user"
                                                            data-dismiss="modal" id="{{friend.id}}">Unfriend</button>
                                                            <button type="button" class="btn btn-outline-danger btn-sm"
                                                            data-dismiss="modal" >Close</button>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <!-- end of modal -->
                                        {% endfor %}
                                        <div class="step-links text-center">
                                            {% if all_friends.has_previous %}
                                                <a href="?page1={{ all_friends.previous_page_number }}" class="page-nav">
                                                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                                                </a>
                                            {% endif %}
                                            <span class="current current-page">
                                                {{ all_friends.number }}/{{ all_friends.paginator.num_pages }}
                                            </span>
                                            {% if all_friends.has_next %}
                                                <a href="?page1={{ all_friends.next_page_number }}" class="page-nav">
                                                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                                                </a>
                                            {% endif %}
                                            </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="container mt-4 ml-2 p-0">
                        <div class="card">
                            <div class="container mb-2">
                                <div class="card border border-dark ">
                                    <label class="net-or-friend float-left ml-2">Trackers </label>
                                    <div class="ml-2 mt-2 mb-2">
                                        {% for obj in trackers_list %}
                                        {% if forloop.first or forloop.counter0|divisibleby:4 %}
                                        <div class="row ">
                                        {% endif %}
                                            <div class="s-12 m-3 l-3 {% if forloop.first or forloop.counter0|divisibleby:4 %} mem-width {% endif %}">
                                                <div class="row">
                                                    <div class="col-md-12 col-sm-12">
                                                        {% if obj.get_profile_photo %}
                                                        <img src="{{obj.get_profile_photo}}" class=" mem-set-img-networkorfriends">
                                                        {% else %}
                                                        <img src="{% static 'images/default_profile_pic.png' %}" class=" mem-set-img-networkorfriends">
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="row mt-2">
                                                    <div class="col-12">
                                                        <div class="name-alg">
                                                            <lab>{{obj.get_full_name|truncatechars:"18"}} </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        {% if forloop.last or forloop.counter|divisibleby:4 %}
                                        </div>
                                        {% endif %}
                                        {% endfor %}
                                        <div class="step-links text-center">
                                            {% if trackers_list.has_previous %}
                                                <a href="?page1={{ trackers_list.previous_page_number }}" class="page-nav">
                                                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                                                </a>
                                            {% endif %}
                                            <span class="current current-page">
                                                {{ trackers_list.number }}/{{ trackers_list.paginator.num_pages }}
                                            </span>
                                            {% if trackers_list.has_next %}
                                                <a href="?page1={{ trackers_list.next_page_number }}" class="page-nav">
                                                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                                                </a>
                                            {% endif %}
                                            </div>

                                    </div>
                                </div>
                                <div class="card border border-dark ">
                                    <label class="net-or-friend float-left ml-2">Tracking</label>
                                    <div class="ml-2 mt-2 mb-2">
                                        {% for obj in tracking_list %}
                                        {% if forloop.first or forloop.counter0|divisibleby:4 %}
                                        <div class="row ">
                                        {% endif %}
                                            <div class="s-12 m-3 l-3 {% if forloop.first or forloop.counter0|divisibleby:4 %} mem-width {% endif %}">
                                                <div class="row">
                                                    <div class="col-md-12 col-sm-12">
                                                        {% if obj.get_profile_photo %}
                                                        <img src="{{obj.get_profile_photo}}" class=" mem-set-img-networkorfriends">
                                                        {% else %}
                                                        <img src="{% static 'images/default_profile_pic.png' %}" class=" mem-set-img-networkorfriends">
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="row mt-2">
                                                    <div class="col-12">
                                                        <div class="name-alg">
                                                            <lab>{{obj.user.get_full_name|truncatechars:"18"}} </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        {% if forloop.last or forloop.counter|divisibleby:4 %}
                                        </div>
                                        {% endif %}
                                        {% endfor %}
                                        <div class="step-links text-center">
                                            {% if tracking_list.has_previous %}
                                                <a href="?page1={{ tracking_list.previous_page_number }}" class="page-nav">
                                                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                                                </a>
                                            {% endif %}
                                            <span class="current current-page">
                                                {{ tracking_list.number }}/{{ tracking_list.paginator.num_pages }}
                                            </span>
                                            {% if tracking_list.has_next %}
                                                <a href="?page1={{ tracking_list.next_page_number }}" class="page-nav">
                                                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                                                </a>
                                            {% endif %}
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr class="mem-set-acc-hr-1">
                    <div class="int-align mt-3">
                        <lable class="my-interest">My Interests :<span class="intrest-lab-tit"> feature lets you set a
                                search and notification for a desirable positions in sertain locations when it gets
                                created.</span></lable>
                    </div>
                    <hr class="mt-1">
                    <div class="container font-weight-bold interest-font">
                        <form method="post" action="{% url 'hobo_user:add-user-interest' %}">
                            {% csrf_token %}
                        <span class="my-interests-section">
                        <div class="row intrest-input mb-2">
                                <div class="col-sm-4">Position
                                    <select name="position" id="position_1"
                                    class="form-control form-control-input mt-2" required>
                                        {% for position in my_interest_form.position %}
                                            {{position}}
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-sm-4">Format
                                    <select name="format" id = "format_1"
                                    class="form-control form-control-input mt-2 " required>
                                        {% for item in my_interest_form.format %}
                                        {{item}}
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-sm-4">Location
                                    <select name="location" id ="location_1"
                                    class="form-control form-control-input mt-2 " required>
                                        {% for item in my_interest_form.location %}
                                        {{item}}
                                        {% endfor %}
                                    </select>
                                </div>
                           </div>
                           </span>
                        <div class="row mt-2">
                            <div class="col-md-6 col-sm-4">
                                <a class="btn btn-light btn-sm btn rounded-0 border border-dark font-weight-bold ad-or-save"
                                    id="add-more-interests">Add
                                    More</a>
                                    <input type="submit" class="btn mem-setup-blu-f  save_btn" value="Save"/>
                            </div>
                        </div>
                    </form>
                        <div class="row mt-2">
                            <div class="col-md-12 col-sm-4">
                                <span class="intrest-lab-md">When someone post a project meeting your criteria you will
                                    get a notification so you can apply for the position.
                                </span>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="table-responsive-sm  ">
                        <div class="card">
                            <label class="col-sm-3 my-interest-2">My Interests ({{myinterests.count}})</label>
                            <div>
                                {% for obj in myinterests %}
                                <table class="table brderless table-responsive-sm font-weight-bold mem-table">
                                    <thead>
                                        <tr class="interest-font">
                                            <th scope="col">Position: <u>{{obj.position}}</u> </th>
                                            <th scope="col">Format: <u>{{obj.format}}</u> </th>
                                            <th scope="col">Location: <u>{{obj.location}}</u></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <!-- <th><a class="tbl-tag" href="">Project # 233</a></th>
                                            <td>Title: Ripples of Moonlight</td>
                                            <td>Posted on 07/23/21</td>
                                            <td class="int-applied">Applied</td>
                                            <td class="int-red">Passed</td>
                                            <td class="int-grey">Attached</td>
                                            <td class="int-red">(on 08/05/21)</td> -->
                                        </tr>

                                    </tbody>
                                </table>
                                <hr class="mem-set-acc-hr-1">
                                {% endfor %}
                            </div>
                        </div>
                    </div>

                    <!-- End my interest -->

                    <!-- Add your post  -->
                    <div class="container mt-4 p-0">
                        <div class="card mb-12 " style="height: 450px;">
                            <div class="row">
                                <div class="col-8 ml-2 mt-2 mb-1">
                                    <button type="button" class="btn  text-secondary border btn-block" id="msg-drop"
                                        class="inp-file" data-toggle="dropdown">What’s on Your Mind</button>
                                    <div class="dropdown-menu drop-card">
                                        <div class="dropdown-item">
                                            <button type="button" class="close" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                            <div class="col-6 ml-2 mt-2 mb-1">
                                                <img src="static/img/img1.PNG" class="rounded-circle-img">
                                                <div class="col ml-5 col-sm-12 dropdwn ">
                                                    Name Name
                                                    <hr class="post-hr">
                                                    <div class="row post-txt">
                                                        <div class="col-md-4 col-sm-4 mr-2 px-2">
                                                            This post is for:
                                                        </div>
                                                        <div class="col col-sm-4 ml-3 drop-smb">
                                                            <label class="drop-all">ALL</label>
                                                            <i class="fa fa-star mem-star ml-1" aria-hidden="true"></i>
                                                            <i class="fa fa-circle mem-circle ml-1" aria-hidden="true"></i>
                                                            <i class="fa fa-square mem-square ml-1" aria-hidden="true"></i>
                                                            <span class="ml-1"><img src="static/img/red-triangle.png"
                                                                    class="red-triangle" /></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <textarea class="form-control" id="exampleFormControlTextarea1" rows="4"
                                                    placeholder="Write your post here" style="border: none;"></textarea>
                                            </div>
                                            <div class="col-md-6 col-sm ">
                                                <label for="file-upload" class=" inp-file-msg"
                                                    style="min-width: 100%;">Add to your post <i
                                                        class="fa fa-picture-o mt-2" style="position: relative;
                                                    left: 6%;" aria-hidden="true"></i> <button
                                                        class="emoji-btn btn-light" id="emoji-button"
                                                        style="border-radius: 50%; height: 18px; position: relative;left: 12%;"><i
                                                            class="fa fa-smile-o"
                                                            aria-hidden="true"></i></button></label>
                                                <input type="file" id="file-upload" class="inp-file">

                                            </div>
                                            <div class="col-md-6 col-sm ">
                                                <button class="btn btn-login">Post</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-3 float-right mt-2 mb-1">
                                    <input class="form-control text-center " name="myBrowser" placeholder="Messenger" />
                                </div>
                            </div>
                         </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block extrajs %}
<script>

    $(document).ready(function() {
        $('#location_1').select2();
        $('#position_1').select2();
        $('#format_1').select2();
    });

// add more - my interests
var count=1;
$('body').on('click' , '#add-more-interests', function(){
    count++
    var location_id ="#location_"+count
    var position_id ="#position_"+count
    var format_id ="#format_"+count
    var data_dict = {}
    data_dict = {'count':count}
    // get add coworker form
    $.get('/hobo_user/add-user-interest-form/',data_dict)
    .done(function(data) {
    if(data.results!='')
        {
            $('.my-interests-section').append(data['add_my_interests_form_html']);
            $(location_id).select2();
            $(position_id).select2();
            $(format_id).select2();
        }
    });
});
</script>
<script>
        $("input[id='file']").change(function (e) {
            var $this = $(this);
            console.log($this.val().split('\\').pop())
            $(".image-filename").html($this.val().split('\\').pop());
        });
    </script>
<script>
        $('.mem-star').click(function () {
            $(this).toggleClass("fa-star-o");

        });
        $('.mem-square').click(function () {
            $(this).toggleClass("fa-square");

        });
        $('.mem-circle').click(function () {
            $(this).toggleClass("fa-circle");

        });
        $(".tri-img").click(function () {
            $(this).find('img').toggle();
        });

    </script>
<script>
    $('body').on('click' , '.pos', function(){
        var id = $(this).attr('id');
        position=id.split("_")[0]
        image_id=id.split("_")[1]
        data_dict = {"id":image_id, "position":position}
        console.log(data_dict)
        $.get('/hobo_user/swap-image-position/', data_dict)
                .done(function(data) {
                    if(data.results!='')
                        {
                            location.reload();
                        }
                });
    });
</script>
<script>
    $('body').on('click' , '#save-group', function(){
        var token = $("#token").val();
        data_dict = {}
        var group_name = $("#group_name").val();
        if(group_name){
            data_dict['title'] = group_name
        }
        $.ajax
        ({
            type: "POST",
            url: "/hobo_user/add-group-api/",
            dataType: 'json',
            async: false,
            data: data_dict,
            beforeSend: function (xhr) {
                xhr.setRequestHeader ("Authorization", token);
            },
            success: function (response){
                $.get('/hobo_user/update-friend-groups/')
                .done(function(data) {
                    if(data.results!='')
                        {
                            $("#group_name").val("");
                            $('.friend-group').html(" ")
                            $('.friend-group').html(data['groups_html']);
                        }
                });
            }
        });
    });
</script>
<script>
    $('body').on('click' , '.add-friend-to-groups', function(){
        var friend = $(this).attr('id');
        var token = $("#token").val();
        var data_dict = {}
        var groups = [];
            $.each($("input[name='group_"+friend+"']:checked"), function(){
                groups.push($(this).val());
            });
        if(friend){
            data_dict['friend'] = friend
        }
        if(groups){
            data_dict['groups'] = groups
        }
        console.log(data_dict)
        $.ajaxSetup({traditional: true});
        $.ajax
        ({
            type: "POST",
            url: "/hobo_user/add-friend-to-group-api/",
            dataType: 'json',
            async: false,
            data: data_dict,
            beforeSend: function (xhr) {
                xhr.setRequestHeader ("Authorization", token);
            },
            error: function(data){
                console.log(data);
                $('#warning_message').fadeIn().html("Failed to update groups");
                setTimeout(function() {$('#warning_message').fadeOut("slow");}, 2000 );
            },
            success: function (response){
                $('#success_message').fadeIn().html("Groups Updated");
                setTimeout(function() {$('#success_message').fadeOut("slow");}, 2000 );
            }
        });
    });
</script>
<script>
    $('body').on('change' , '#filter-friends', function(){
        var group = $(this).find("option:selected").val();
        console.log("----group",group)
        data_dict = {'group':group}
        $.get('/hobo_user/filter-friend-by-groups/', data_dict)
        .done(function(data) {
            if(data.results!='')
                {
                    $('.friend-list').html(" ")
                    $('.friend-list').html(data['friends_html']);
                }
        });
    });
</script>
<script>
    $('body').on('click' , '.remove-friend-group', function(){
        var group = $(this).attr('id');
        var token = $("#token").val();
        var data_dict = {}
        if(group){
            data_dict['group'] = group
        }
        $.ajax
        ({
            type: "POST",
            url: "/hobo_user/remove-friend-group-api/",
            dataType: 'json',
            async: false,
            data: data_dict,
            beforeSend: function (xhr) {
                xhr.setRequestHeader ("Authorization", token);
            },
            error: function(data){
                $('#warning_message').fadeIn().html("Failed to remove group");
                setTimeout(function() {$('#warning_message').fadeOut("slow");}, 2000 );
            },
            success: function (response){
                $.get('/hobo_user/update-friend-groups/')
                .done(function(data) {
                    if(data.results!='')
                        {
                            $('.friend-group').html(" ")
                            $('.friend-group').html(data['groups_html']);
                        }
                });
            }
        });
    });
    $('body').on('click' , '#close-friend-group-modal', function(){
        window.location.reload();
    });
</script>
<script>
    // unfriend a user
$('body').on('click' , '.unfriend-user', function(){
    var token = $("#token").val();
    var profile_user = $(this).attr('id');
    var data_dict = {}
    if(profile_user){
        data_dict['user'] = profile_user;
    }
    console.log(data_dict)
    $.ajax
        ({
            type: "POST",
            url: "/hobo_user/unfriend-user-api/",
            dataType: 'json',
            async: false,
            data: data_dict,
            beforeSend: function (xhr) {
                xhr.setRequestHeader ("Authorization", token);
            },
            success: function (response){
                window.location.reload();
            }
        });
});

</script>
<script>
$('body').on('click' , '.close-add-togroup-modal', function(){
    window.location.reload();
});
</script>
{% endblock %}


