{% extends 'base.html' %}
{% load static %}
{% load project_rating_tag %}
{% load samr_display_tag %}
{% load user_account_tag %}
{% load project_tracking_tag %}

{% block extracss %}
{% endblock %}

{% block content %}
<div class="wrapper flex-grow-1">
    <div class="container-fluid">
        <div class="row">

            <!-- Left section  -->

            <div class="col-lg-2 col-md-12 col-sm-12 col-xs-12 mt-2 mb-2">
                <div class="left-mode-sec p-2 text-center ">
                    <div class="log-left-sec">
                        <ul class="list-unstyled">
                            <li class="mt-1">


                                {% get_project_tracking_list request.user project as is_tracking %}
                                {% if is_tracking %}
                                        <input type ="hidden" name="project_id" id="project_id" value ="{{project.id}}" />
                                        <span class="track-btn">
                                            <a class="mem-blu-link log-fnt-weight cursor-pointer un_track_project" id="{{project.title}}">T<span class="mem-small-f">RACKING</span></a>
                                        </span>
                                {% else %}
                                        {% if project.creator.id != request.user.id %}
                                                <input type ="hidden" name="project_id" id="project_id" value ="{{project.id}}" />
                                                <span class="track-btn">
                                                    <a class="mem-blu-link log-fnt-weight cursor-pointer track_project" id="{{project.title}}">T<span class="mem-small-f">RACK</span></a>
                                                </span>
                                        {% endif %}
                                {% endif %}

                            </li>
                            <li id="share-link" data-toggle="modal" data-target="#sharing_modal" class="mt-1"><a href="#" class="mem-blu-link log-fnt-weight">S<span class="mem-small-f">HARE</span></a>
                            </li>
                            <li class="mt-1"><a data-toggle="modal" data-target="#rating_modal" class="cursor-pointer red-f log-fnt-weight">R<span class="mem-small-f">ATE THIS</span> P<span
                                class="mem-small-f">ROJECT</span></a>
                                <div class="sgl-rate-star" data-toggle="modal" data-target="#rating_modal">
                                    <div class="cta-stars-outer">
                                        <div class="cta-stars-inner" style="width:{{project.rating}}%;"></div>
                                    </div>
                                </div>


<!-- The Sharing Modal -->
<!-- Modal End -->

<!-- Share Modal Start -->
<div class="modal fade" id="shareModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content col-12">
            <div class="modal-header">
                <h5 class="modal-title">Share</h5> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span id="shareModalClose" aria-hidden="true">&times;</span> </button>
            </div>
            <div class="modal-body">
                <div class="col-sm-12 email-id-row">
                    <span class="to-input">To</span>
                        <div id="all_mail" class="all-mail">
                        </div>
                       
                    
                     
                        <select class="form-control" name="languageSelect" multiple id="languageSelect">
                            {% for friend in friends %}
                            <option value="{{friend.id}}" >{{friend}} </option>
                                {% endfor %}
                        </select>
                        <div class="modal-footer">
                            <button id="url_send" type="submit" class="btn btn-primary">Send</button>
                            <button  data-dismiss="modal" id="cancel_url" type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>

                        </div>
                   
                </div>
            </div>
           
        </div>
    </div>
</div>
<!-- Modal End -->


<!-- The Modal -->
<div class="modal fade" id="rating_modal">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h6 class="modal-title mem-setup-blu-f">Rate {{project.title}}</h6>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <div class="row">
                    <div class="col-12 ">
                            <div class="row" >
                                {% get_my_project_rating request.user.id project.id as my_rating %}
                                {% if my_rating != 0 %}
                                <div class="col-12" >
                                    <p clss="all-p">You have already given {{my_rating}} star rating for {{project.title}}.</p>
                                </div>
                                {% else %}
                                <div class="offset-2 col-6 " id="rating-form" >
                                    <div class="row">
                                        <span class="give-rating">
                                                <input type="radio" id="star5" name="rate" class="rate" value="5"/>
                                                <label for="star5" title="5 Star">5 stars</label>

                                                <input type="radio" id="star4" name="rate" class="rate"  value="4"/>
                                                <label for="star4" title="4 Star">4 stars</label>

                                                <input type="radio" id="star3" name="rate" class="rate"  value="3"/>
                                                <label for="star3" title="3 Star">3 stars</label>

                                                <input type="radio" id="star2" name="rate" class="rate"  value="2"/>
                                                <label for="star2" title="2 Star">2 stars</label>

                                                <input type="radio" id="star1" name="rate" class="rate" value="1"/>
                                                <label for="star1" title="1 Star">1 star</label>
                                        </span>
                                    </div>
                                </div>
                                {% endif %}
                            </div>
                    </div>
                </div>
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                {% if my_rating == 0 %}
                <button type="button" class="btn btn-outline-danger btn-sm submit-rating"
                id="{{project.id}}">Submit</button>
                <button type="button" class="btn btn-outline-danger btn-sm "
                data-dismiss="modal">Cancel</button>
                {% else %}
                <button type="button" class="btn btn-outline-danger btn-sm "
                data-dismiss="modal">Close</button>
                {% endif %}
            </div>

        </div>
    </div>
</div>
<!-- Modal End -->
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="left-mode-sec  p-2   mt-2 sgl-left-mode-hgt">
                    <div>
                        {% if project.script %}
                        <div class="card sgl-left-box-lg">
                            <div class="sgl-left-box-sm-align">
                                <div class="sgl-left-box-lg-align">
                                    <span class="sgl-left-box-lg-txt"><a href="">{{project.title}}</a> Written by {{writer}}</span>
                                </div>
                            </div>
                            <div class="sgl-info-open-txt-align">
                                <span class="sgl-info-open">
                                    {% if project.script_password %}
                                    <a class="script_open_password_check cursor-pointer" id="{{project.id}}">Open</a>
                                    {% else %}
                                    <a href="{{project.script.url}}" class="cursor-pointer" target="_blank">Open</a>
                                    {% endif %}
                                </span>
                                <span class="sgl-info-download">
                                    {% if project.script_password %}
                                    <a id="{{project.id}}" class="script_download_password_check cursor-pointer">Download</a>
                                    {% else %}
                                    <a href="{{project.script.url}}" download>Download</a>
                                    {% endif %}
                                </span>
                            </div>
                        </div>
                        <div class="sgl-left-box-password">
                            <span>
                                <input type="password"  name="password" class="sgl-info-password"
                                placeholder="*****" id="script_password"></span>
                                <span class="script-password-err errormsg"></span>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Left section End -->
            <!-- Center section  -->

            <div class="col-lg-8 col-md-12 col-sm-12 col-xs-12 mt-2 mb-2">

                <!-- Top menu  -->
                <div class="sgl-menu-bg">
                    <ul class="sgl-menu">
                        <li><span class="video-menu-head">PROJECT </span><a href="{% url 'project:single-film-project' project.id %}" >#{{project.id}}</a></li>
                        <li><span >Title: </span><span class="sgl-menu-blue">{{project.title}}</span></li>
                        <li><span>Format: </span><span class="sgl-menu-blue">{{project.get_format_display}}</span></li>
                        <li><span>Genre: </span><span class="sgl-menu-blue">{{project.get_genre_display}}</span></li>
                        <li><span>Location(s): </span><span class="sgl-menu-blue">{{project.location}}</span></li>
                    </ul>
                </div>
                <!-- Top menu  End-->
                <!-- Three column  -->
                <div class="row sgl-row-align">
                    <div class="col-lg-4 col-sm-12 mb-2">
                        <div class="left-mode-sec sgl-topcol-align1">
                            <div class="sgl-col-cnt1">
                                <div>
                                    <span class="sgl-black-txt">CREATOR: </span>
                                    <span class="sgl-blue-txt"><a href="" class="txt-capitalize">{{project.creator.get_full_name}}</a></span>
                                    <span>
                                        <span class="log-star">
                                                <div class="">
                                                    <div class="cta-stars-outer">
                                                        <div class="cta-stars-inner" style="width:{{project_creator_rating}}%;"></div>
                                                      </div>
                                                </div>
                                        </span>
                                    </span>
                                </div>
                                <div>
                                    <span class="sgl-black-txt">Visibility: </span>
                                    <span class="sgl-blue-txt txt-capitalize">{{project.visibility}}</span>
                                </div>
                                <div>
                                    <span class="sgl-black-txt">Cast Attachment: </span>
                                    <span class="sgl-blue-txt">{{project.get_cast_attachment_display}}</span>
                                </div>
                                <div>
                                    <span class="sgl-black-txt">Cast Pay Rate: </span>
                                    <span class="sgl-blue-txt">{{project.get_cast_pay_rate_display}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-sm-12 mb-2">
                        <div class="left-mode-sec sgl-topcol-align1">
                            <div class="sgl-col-cnt2">
                                <div id="style-crew" class="show-more-div">
                                <div>
                                    <span class="sgl-black-txt">FILMMAKERS / CREW  (TEAM)</span>
                                </div>
                                <div>
                                    <span class="sgl-team-fnt">Team SAMR: </span>
                                    {% get_crew_samr_display_value project.id as crew_samr_data %}
                                    <span class="sgl-pro-fnt">{{ crew_samr_data.0 }}</span>
                                    <span>
                                        <span class="log-star">
                                            <span class="fa {% if crew_samr_data.1 >= 1 %}fa-star checked {% else %}fa-star-o{% endif %}"></span>
                                            <span class="fa {% if crew_samr_data.1 >= 2 %}fa-star checked {% else %}fa-star-o {% endif %}"></span>
                                            <span class="fa {% if crew_samr_data.1 >= 3 %}fa-star checked {% else %}fa-star-o {% endif %}"></span>
                                            <span class="fa {% if crew_samr_data.1 >= 4 %}fa-star checked {% else %}fa-star-o {% endif %}"></span>
                                            <span class="fa {% if crew_samr_data.1 >= 5 %}fa-star checked {% else %}fa-star-o {% endif %}"></span>
                                        </span>
                                    </span>
                                </div>
                                {% for  crew in project_crew %}
                                <div>
                                    <span class="sgl-black-txt txt-uppercase">{{crew.job_type.title}}: </span>
                                    {% get_dict_value crew_dict crew.id as attached_members %}
                                    {% if attached_members %}
                                    {% for member in attached_members %}
                                    <br>
                                    <span class="sgl-blue-txt"><a href="{{member.user.get_profile_url}}">{{member.user.get_full_name}}</a></span>
                                    <span>
                                        {% get_dict_value crew_rating_dict member.user.id as rating%}
                                        <span class="log-star">
                                            <span class="cta-stars-outer">
                                                <span class="cta-stars-inner" style="width:{{rating}}%;"></span>
                                            </span>
                                        </span>
                                    </span>
                                    {% endfor %}
                                    {% else %}
                                    <span class="sgl-green-txt">
                                        <a href="{% url 'project:crew-apply-audition' project.id %}?crew_id={{crew.id}}">Available</a></span>
                                    {% endif %}
                                </div>
                                {% endfor %}
                                
                            </div>
                            <div class="">
                                <span class="sgl-blue-txt sgl-full-lst-align">
                                    <a class="enable-scroll-crew cursor-pointer">Full List</a></span>
                            </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-sm-12 mb-2">
                        <div class="left-mode-sec sgl-topcol-align2">
                            <div class="sgl-col-cnt2" >
                                <div id="style-2" class="show-more-div">
                                <div>
                                    <span class="sgl-black-tag"><a href="">CAST:</a></span>
                                </div>
                                <div>
                                    <span class="sgl-team-fnt">Cast SAMR: </span>
                                    {% get_samr_display_value project.id as samr_data %}
                                    <span class="sgl-pro-fnt">{{ samr_data.0 }}</span>
                                    <span>
                                        <span class="log-star">
                                            <span class="fa {% if samr_data.1 >= 1 %}fa-star checked {% else %}fa-star-o{% endif %}"></span>
                                            <span class="fa {% if samr_data.1 >= 2 %}fa-star checked {% else %}fa-star-o {% endif %}"></span>
                                            <span class="fa {% if samr_data.1 >= 3 %}fa-star checked {% else %}fa-star-o {% endif %}"></span>
                                            <span class="fa {% if samr_data.1 >= 4 %}fa-star checked {% else %}fa-star-o {% endif %}"></span>
                                            <span class="fa {% if samr_data.1 >= 5 %}fa-star checked {% else %}fa-star-o {% endif %}"></span>
                                        </span>
                                    </span>
                                </div>
                                {% for character in characters %}
                                <div class>
                                    <span class="sgl-orange-txt">{{character.name}}:</span>
                                    {% if character.attached_user or character.attached_user_name %}
                                    <span class="sgl-blue-txt">
                                        {% if character.attached_user %}
                                        <a href="{{character.attached_user.get_profile_url}}">{{character.attached_user.get_full_name|truncatechars:"10"}}</a>
                                        {% elif character.attached_user_name %}
                                        <a>{{character.attached_user_name|truncatechars:"10"}}</a>
                                        {% endif %}
                                    </span>
                                    <span class="log-star">
                                        {% if character.attached_user %}
                                        {% get_dict_value rating_dict character.attached_user.id as rating%}
                                        <span class="">
                                            <span class="cta-stars-outer">
                                                <span class="cta-stars-inner" style="width:{{rating}}%;"></span>
                                            </span>
                                        </span>
                                        {% endif %}
                                    </span>
                                    {% else %}
                                    <span class="sgl-green-txt">
                                        <a href="{% url 'project:cast-password-check' project.id %}">Available</a></span>
                                    {% endif %}
                                </div>
                                {% endfor %}
                            </div>
                                <div class="">
                                    <span class="sgl-blue-txt sgl-full-lst-align">
                                        <a class="enable-scroll cursor-pointer">Full List</a>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Three column  End--> 

                <div class="row mt-2">
                    <div class="col-lg-4 col-sm-12">
                        <!-- CAST AND CREW SECTION  -->
                        <div class="left-mode-sec sgl-cast-crew-align">
                            <div class="sgl-cast-align">
                                <div>
                                    <span class="sgl-black-tag">
                                        {% if project.cast_audition_password %}
                                        <a class="cast_audition_password_check cursor-pointer" id="{{project.id}}">CAST AUDITION</a>
                                        {% else %}
                                        <a href="{% url 'project:audition-list' project.id %}" class="cursor-pointer">CAST AUDITION</a>
                                        {% endif %}
                                    </span>
                                    <div>
                                        <input type="password"  name="password" class="sgl-cast-password" placeholder="******"
                                        id="cast_audition_password" required>
                                        <span class="cast-audition-password-err errormsg"></span>
                                    </div>
                                </div>
                                <div class="sgl-crew-align">
                                    <span class="sgl-black-tag">
                                        {% if project.team_select_password %}
                                        <a class="team_select_password_check cursor-pointer" id="{{project.id}}">TEAM SELECT</a>
                                        {% else %}
                                        <a href="{% url 'project:audition-list' project.id %}" class="cursor-pointer">TEAM SELECT</a>
                                        {% endif %}
                                    </span>
                                    <div>
                                        <input type="password" name="password" class="sgl-cast-password" placeholder="******"
                                        id="team_select_password" required>
                                        <span class="team-select-password-err errormsg"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- CAST AND CREW SECTION  END-->
                        <!-- UPLOAD VIDEO -->
                        <div class="left-mode-sec sgl-cast-crew-align mt-3">
                            <div class="sgl-up-video-align">
                                <div>
                                    <span class="sgl-upload-blue-tag">
                                        {% if project.creator == request.user and project.video_url is not none %}
                                        <a data-toggle="modal" data-target="#upload_video"
                                        class="cursor-pointer">CHANGE VIDEO</a>
                                        {% elif project.creator == request.user and project.video_url is none %}
                                        <a data-toggle="modal" data-target="#upload_video"
                                        class="cursor-pointer">UPLOAD VIDEO</a>
                                        {% else %}
                                        <span class="cursor-pointer">VIDEO</span>
                                        {% endif %}
                                    </span>
                                </div>
                                <hr class="sgl-up-video-hr">
                                <div class="sgl-upload-vdo-frame">
                                    <a
                                    {% if project.video_status == 'uploaded'%}
                                    data-toggle="modal" data-target="#video_player_modal"
                                    {% elif project.video_status == 'posted' %}
                                    href="{% url 'project:video' project.id %}"
                                    {% endif %}
                                     class="cursor-pointer">
                                    {% if project.video_cover_image %}
                                    <img src="{{ project.video_cover_image.url }}" class="sgl-upload-img" >
                                    {% else %}
                                    <img src="{% static 'images/video.png' %}" class="sgl-upload-img" >
                                    {% endif %}
                                    </a>
                                </div>
                                <div class="sgl-upvideo-txt-align">
                                    <span class="sgl-sm-name-txt">Project</span><span class="sgl-blue-txt"><a > #{{project.id}}</a></span>
                                    <span class="sgl-blue-txt sgl-upload-blue-txt-align"><a>{{project.get_format_display}}</a></span>
                                    <span class="sgl-upload-star">
                                        <div class="cta-stars-outer">
                                            <div class="cta-stars-inner" style="width:{{project.video_rating}}%;"></div>
                                        </div>
                                    </span>
                                </div>
                                <div>
                                    <span class="sgl-sm-name-txt">Name: </span><span class="sgl-blue-txt"><a >{{project.title}}</a></span>
                                </div>
                                <hr class="sgl-up-video-hr">
                                <div class="sgl-red-post-align">
                                    <span class="sgl-post-red-tag">
                                        <a class=" cursor-pointer" title="Publish Video" data-toggle="modal" data-target="#post_video">POST VIDEO</a>

<!-- The Modal -->
<div class="modal fade" id="video_player_modal">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h6 class="modal-title mem-setup-blu-f">Watch {{project.title}}</h6>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <div class="row">
                    <div class="col-12 ">
                            <div class="row" >
                                <div class="col-12" >
                                {% if project.video_type == 'vimeo' %}
                                    <iframe src="https://player.vimeo.com/video/{{ project.video_url }}?byline=false&dnt&portrait=false&title=false&loop=true" width="100%" height="250"
                                    data-show-text="false" frameborder="0" allowfullscreen></iframe>
                                    <img src=""/>
                                {% elif project.video_type == 'youtube' %}
                                    <iframe
                                    src="http://www.youtube.com/embed/{{ project.video_url }}?rel=0&modestbranding=1&loop=1&playlist={{ project.video_url }}&color=white" width="100%" height="250"
                                    data-show-text="false" allowFullScreen="allowFullScreen" frameBorder="0"></iframe>
                                {% endif %}
                                </div>
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal End -->

<!-- The Modal -->
<div class="modal fade" id="post_video">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h6 class="modal-title mem-setup-blu-f">POST VIDEO</h6>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <div class="row">
                    <div class="col-12 ">
                            <div class="row" >
                                <div class="col-12" >
                                    <p class="all-p-light">Video posted to screening room cannot be deleted. But in future you can replace your video
                                        with another video.
                                    </p>
                                    <p class="all-p">Do you want to post the video to screening room ?</p>
                                </div>
                            </div>
                    </div>
                </div>
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-danger btn-sm publish_video"
                id="{{project.id}}" title="Publish Video">Yes</button>
                <button type="button" class="btn btn-outline-danger btn-sm "
                data-dismiss="modal">Cancel</button>
            </div>

        </div>
    </div>
</div>
<!-- Modal End -->
                                    </span>
                                </div>
                            </div>
                        </div>
<!-- The Modal -->
<div class="modal fade" id="upload_video">
    <div class="modal-dialog">
    <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
        <h5 class="modal-title samr-modal-title">Upload Video</h5>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <form  method="post"
        action="{% url 'project:add-project-video' project.id %}"
        id="sidesform" enctype="multipart/form-data" class="all-p">
        {% csrf_token %}
        <div class="modal-body">
            <div class="row mt-2">
                <div class="col-12">
                    <p class="samr-modal-txt"><span class="alert-style">Warning!! </span>
                        If you would like to keep your Video confidential (outside of FilmHobo),
                        please upload it to YouTube and use the "Unlisted" option for that video,
                        or if you uploaded it to Vimeo then use the "Private" or "Hide from Vimeo"
                        privacy option for that video. It won't be public, only people with the
                        link will be able to watch it
                    </p>
                </div>
            </div>
            <div class="row mt-1">
                <div class="offset-1 col-3">
                    <span class=""> Video type</span>
                </div>
                <div class="col-7">
                    <select class="inp-line"
                    name="video_type" id = "video_type" required>
                    <option value="" disabled selected hidden>Choose file type</option>
                        {% for item in video_types %}
                            <option value="{{item.0}}">
                                {{item.1}}
                            </option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="row mt-1">
                <div class="offset-1 col-3 ">
                    <span class=""> Video Url
                </div>
                <div class="col-7">
                    <input name='video_url' id='video_url' class='inp-line video_url'
                    autocomplete='off' required/>
                </div>
                <div class="offset-1 col-12">
                    <span class="col-12 video_url_section"></span>
                </div>
            </div>
            <div class="row mt-1">
                <div class="offset-1 col-3 ">
                    <span class=""> Cover Image </span>
                </div>
                <div class="col-7">
                    <input type="file" name="video_cover_image" accept="image/*"
                    class="caa-img-field" required/>
                </div>
            </div>
        </div>

        <!-- Modal footer -->
        <div class="modal-footer">
        <input type="submit" class='btn btn-outline-danger btn-sm cursor-pointer ' value="Save" />
        <button class="btn btn-outline-danger btn-sm"
        data-dismiss="modal">Close</button>
        </div>
    </form>

    </div>
    </div>
</div>
<!-- end of modal -->
                        <!-- UPLOAD VIDEO  END-->
                    </div>
                    <div class="col-lg-8 col-sm-12 sgl-card-col-mt">
                        <div class="left-mode-sec sgl-topcol-align2">
                            <div class="sgl-logline-card-align">
                                <div class="card sgl-logline-card">
                                    <div class="logline-edit-div">
                                        {% if project.creator == request.user %}
                                        <a class="cursor-pointer" data-toggle="modal" data-target="#update_logline_modal">Edit</a>
                                        {% endif %}
                                    </div>
                                    <div class="sgl-card-inner-align">
                                        <div class="row">
                                            <div class="col-12 col-sm-4 col-md-3">
                                                <span class="sgl-logline-txt">Logline</span>
                                            </div>
                                            <div class="col-12 col-sm-8 col-md-9">
                                                {% if project.logline %}
                                                <span class="sgl-logline-txt">{{project.logline}}</span>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="sgl-info-align">
                                            <div class="row">
                                                <div class="col-12 col-sm-4 col-md-3">
                                                    <span class="sgl-logline-txt">Project Info:</span>
                                                </div>
                                                <div class="col-12 col-sm-8 col-md-9">
                                                    {% if project.project_info %}
                                                    <span class="sgl-logline-txt">{{project.project_info}}</span>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
<!-- The Modal -->
<div class="modal fade" id="update_logline_modal">
    <div class="modal-dialog">
    <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
        <h5 class="modal-title samr-modal-title">Update Project Logline & Project Info</h5>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
            <div class="row mt-2">
                <div class="col-12">
                    <p class="samr-modal-txt">
                        <span class="alert-style"></span>
                    </p>
                </div>
            </div>
            <div class="row mt-1">
                <div class="offset-1 col-3">
                    <span class=""> Logline</span>
                </div>
                <div class="col-7">
                    <input class="form-control" name="logline" id="logline" value="{% if project.logline %}{{project.logline}}{% else %}{% endif %}" />
                </div>
            </div>
            <div class="row mt-1">
                <div class="offset-1 col-3 ">
                    <span class=""> Project Info </span>
                </div>
                <div class="col-7">
                    <textarea class="form-control" name="project_info" rows=8 id="project_info" >{% if project.project_info %}{{project.project_info}}{% else %}{% endif %}</textarea>
                </div>
            </div>
        </div>

        <!-- Modal footer -->
        <div class="modal-footer">
        <a class='btn btn-outline-danger btn-sm cursor-pointer save_logline'
        id='{{project.id}}'>Save</a>
        <button class="btn btn-outline-danger btn-sm"
        data-dismiss="modal">Close</button>
        </div>

    </div>
    </div>
</div>
<!-- end of modal -->
                                </div>
                                <div class="card sgl-logline-card mt-4 mb-3">
                                    <div class="sgl-card2-inner-align">
                                        <div >
                                            <span class="sgl-invite-txt"><a href=""><span class="sgl-fnt-lg">G</span>ROUPS</a></span>
                                            <span class="sgl-post-txt sgl-post-txt-align"><a href=""><span class="sgl-fnt-post-lg">P</span>OST <span class="sgl-fnt-post-lg">M</span>ESSAGE/<span class="sgl-fnt-post-lg">M</span>EDIA</a></span>
                                            <!-- <span class="sgl-invite-txt sgl-video-txt-align"><a href=""><span class="sgl-fnt-lg">V</span>ideo <span class="sgl-fnt-lg">C</span>hat</a></span> -->
                                        </div>
                                        <div class="sgl-post-cont">
                                            <span class="sgl-post-cont-fnt"><span class="sgl-post-cont-fnt-lg">T</span>HIS <span class="sgl-post-cont-fnt-lg">B</span>OARD IS <span class="sgl-post-cont-fnt-lg">P</span>RIVATE BY <span class="sgl-post-cont-fnt-lg">D</span>EFAULT. <span class="sgl-post-cont-fnt-lg">ONLY </span><span class="sgl-post-cont-fnt-lg">M</span>EMBERS (ATTACHED CAST, FILMMAKERS AND CREW) CAN SEE THIS BOARD!</span>
                                        </div>
                                        <div class="sgl-post-cont">
                                            <span class="sgl-post-cont-fnt"><span class="sgl-post-cont-fnt-lg">T</span>HE <span class="sgl-post-cont-fnt-lg">P</span>RODUCER CAN CREATE GROUPS TO CONTACT THEM ON THIS BOARD. </span>
                                        </div>
                                        <div class="sgl-post-cont-line">
                                            <span class="sgl-post-cont-fnt"><span class="sgl-post-cont-fnt-lg">O</span>NLY MEMBERS OF THIS GROUPS(S) CAN POST AND SEE MESSAGES.</span>
                                        </div>
                                        <div class="sgl-post-cont">
                                            <span class="sgl-post-cont-fnt"><span class="sgl-post-cont-fnt-lg">W</span>HEN SOMEONE POSTS A MESSAGE EVERYONE (FROM THAT GROUP) GETS NOTIFICATION.  </span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Center section End -->
            <!-- Right section -->

            <div class="col-lg-2 col-md-12 col-sm-12 col-xs-12 mt-2 mb-3 top_rated_members">
            </div>

            <!-- Right section  End-->

        </div>
    </div>
</div>
{% endblock %}

{% block extrajs %}
<script src="{% static 'js/videoplayer_invite.js' %}"></script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script src="https://phpcoder.tech/multiselect/js/jquery.multiselect.js"></script>
<link rel="stylesheet" href="https://phpcoder.tech/multiselect/css/jquery.multiselect.css">


<script src="{% static 'js/project-rating.js' %}"></script>

<script type="text/javascript">

var  availableTags = [];

jQuery('#languageSelect').multiselect({
    columns: 1,
    placeholder: 'Select Users',
    search: true,
    selectAll: true
});


$('body').on('change' , '#video_type', function(){
    var choice = $(this).find("option:selected").val();
    if(choice=='vimeo'){
        $('.video_url_section').html("");
        $('.video_url_section').append("<span>Eg:https://vimeo.com/123456789</span>");
    }else if(choice=='youtube'){
        $('.video_url_section').html("");
        $('.video_url_section').append("<span>Eg:https://www.youtube.com/watch?v=ZABcDEfgHIJK</span>");
    }
});

$('body').on('click' , '.publish_video', function(){
    var project_id = $(this).attr('id');
    var token = $("#token").val();
    if(project_id!=""){
        $.ajax
          ({
              type: "POST",
              url: "/project/post-project-video/",
              dataType: 'json',
              async: false,
              data: {'project_id':project_id},
              beforeSend: function (xhr) {
                  xhr.setRequestHeader ("Authorization", token);
              },
              success: function(response){
                  window.location.reload()
              }
          });
    }
});
</script>
<script>
    $('body').on('click' , '.enable-scroll', function(){
        $("#style-2").css({ 'overflow-y': 'scroll'});
    });
    $('body').on('click' , '.enable-scroll-crew', function(){
        $("#style-crew").css({ 'overflow-y': 'scroll'});
    });
</script>
<script type="text/javascript">

    function PrintElem(elem)
    {
        var data = $(elem).html();
        var mywindow = window.open('', 'new div', 'height=400,width=800');
        mywindow.document.write('<html><head><title>Sides</title>');
        mywindow.document.write('<h1>Sides</h1>');
        mywindow.document.write('</head><body >');
        mywindow.document.write(data);
        mywindow.document.write('</body></html>');
        mywindow.print();
        mywindow.close();
        return true;
    }

</script>
<script>
    $('body').on('click' , '.script_open_password_check', function(){
        var project_id = $(this).attr('id')
        var password = $("#script_password").val();
        var token = $("#token").val();
        data_dict = {}
        data_dict['project_id'] = project_id;
        if(password!=""){
            data_dict['password'] = password
            $.ajax
            ({
                type: "POST",
                url: "/project/script-password-check/",
                dataType: 'json',
                async: false,
                data: data_dict,
                beforeSend: function (xhr) {
                    xhr.setRequestHeader ("Authorization", token);
                },
                success: function(response){
                    var url = response['url']
                    if('errors' in response){
                        $('.script-password-err').html(response['errors'])
                    }else{
                        $('.script-password-err').html("");
                        $('#script_password').val("");
                        window.open(url,'_blank');
                    };
                }
            });
        }else{
            $('.script-password-err').html("Password is required.")
        }
    });

    $('body').on('click' , '.script_download_password_check', function(){
        var project_id = $(this).attr('id')
        var password = $("#script_password").val();
        var token = $("#token").val();
        data_dict = {}
        data_dict['project_id'] = project_id;
        if(password!=""){
            data_dict['password'] = password
            $.ajax
            ({
                type: "POST",
                url: "/project/script-password-check/",
                dataType: 'json',
                async: false,
                data: data_dict,
                beforeSend: function (xhr) {
                    xhr.setRequestHeader ("Authorization", token);
                },
                success: function(response){
                    var url = response['url']
                    if('errors' in response){
                        $('.script-password-err').html(response['errors'])
                    }else{
                        $('.script-password-err').html("");
                        $('#script_password').val("");
                        var link=document.createElement('a');
                        link.href=url;
                        link.download="script.pdf";
                        link.click();
                    };
                }
            });
        }else{
            $('.script-password-err').html("Password is required.")
        }
    });

    $('body').on('click' , '.cast_audition_password_check', function(){
        var project_id = $(this).attr('id')
        var password = $("#cast_audition_password").val();
        var token = $("#token").val();
        data_dict = {}
        data_dict['project_id'] = project_id;
        if(password!=""){
            data_dict['password'] = password
            $.ajax
            ({
                type: "POST",
                url: "/project/cast-audition-password-check/",
                dataType: 'json',
                async: false,
                data: data_dict,
                beforeSend: function (xhr) {
                    xhr.setRequestHeader ("Authorization", token);
                },
                success: function(response){
                    var url = response['url']
                    if('errors' in response){
                        $('.cast-audition-password-err').html(response['errors'])
                    }else{
                        $('.cast-audition-password-err').html("");
                        $('#cast_audition_password').val("");
                        window.location.href = "/project/audition-list/"+project_id+"/";
                    };
                }
            });
        }else{
            $('.cast-audition-password-err').html("Password is required.")
        }
    });

    $('body').on('click' , '.team_select_password_check', function(){
        var project_id = $(this).attr('id')
        var password = $("#team_select_password").val();
        var token = $("#token").val();
        data_dict = {}
        data_dict['project_id'] = project_id;
        if(password!=""){
            data_dict['password'] = password
            $.ajax
            ({
                type: "POST",
                url: "/project/team-select-password-check/",
                dataType: 'json',
                async: false,
                data: data_dict,
                beforeSend: function (xhr) {
                    xhr.setRequestHeader ("Authorization", token);
                },
                success: function(response){
                    var url = response['url']
                    if('errors' in response){
                        $('.team-select-password-err').html(response['errors'])
                    }else{
                        $('.team-select-password-err').html("");
                        $('#team_select_password').val("");
                        window.location.href = "/project/crew-application-listing/"+project_id+"/";
                    };
                }
            });
        }else{
            $('.team-select-password-err').html("Password is required.")
        }
    });
</script>
<script>

    $('body').on('click' , '.save_logline', function(){
        var project_id = $(this).attr('id')
        var logline = $("#logline").val();
        var project_info = $("#project_info").val();
        var token = $("#token").val();
        var data_dict = {};
        data_dict['project_id'] = project_id;
        data_dict['logline'] = logline
        data_dict['project_info'] = project_info
        console.log(data_dict)
        $.ajax
            ({
                type: "POST",
                url: "/project/save-project-logline/",
                dataType: 'json',
                async: false,
                data: data_dict,
                beforeSend: function (xhr) {
                    xhr.setRequestHeader ("Authorization", token);
                },
                success: function(response){
                    window.location.reload()
                }
            });
    });
</script>

<script src="{% static 'js/project_tracking.js' %}"></script>
{% endblock %}


